<h1>Registration</h1>
<fieldset>
  <legend>Account</legend>
  <div *ngIf='success'>
    <p>
      Thank you for registering with us {{successUser.firstName}}. We just sent you a confirmation email <br>at {{successUser.email}} and we will send all mail to {{successUser.address}} {{successUser.city}} {{successUser.state}}
    </p>
    <p>Have a wonderful day!</p>
  </div>
  <form (submit)="onSubmit()">
    <p></p>
    <label>First Name: 
      <input 
        type="text" 
        name="firstName" 
        required 
        minlength="2"
        [(ngModel)] = "user.firstName"
        #firstName = "ngModel"
      />
      <span *ngIf="!firstName.valid">
        <span *ngIf="firstName.errors.required==true">First Name is Required</span> 
        <span *ngIf="firstName.errors.minlength">Name must be at least 2 characters long</span> 
      </span>
    </label>
    <p></p>
    <label>Last Name: 
      <input 
        type="text" 
        name="lastName"
        required 
        minlength="2" 
        [(ngModel)] = "user.lastName" 
        #lastName = "ngModel"
      />
      <span *ngIf="!lastName.valid">
        <span *ngIf="lastName.errors.required">Last Name is Required</span> 
        <span *ngIf="lastName.errors.minlength">Name must be at least 2 characters long</span> 
      </span>
    </label>
    <p></p>
    <label>Email: 
      <input        
        type="email" 
        name="email"
        required
        pattern='(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))'
        [(ngModel)] = "user.email" 
        #email = "ngModel"/>
    </label>
      <span *ngIf="!email.valid">
        <span *ngIf="email.errors.required">Email is Required</span> 
        <span *ngIf="email.errors.pattern">Must be a valid Email</span> 
      </span>
    <p></p>
    <label>Password: 
      <input
        type="password" 
        name="password"
        required 
        minlength="8"
        [(ngModel)] = "user.password" 
        #password = "ngModel"/>
    </label>
    <span *ngIf="!password.valid">
      <span *ngIf="password.errors.required">Password is Required</span> 
      <span *ngIf="password.errors.minlength">Password must be at least 8 characters long</span> 
    </span>
    <p></p>
    <label>Password Confirmation: 
      <input type="password" name="passwordConfirmation" required [(ngModel)] = "user.passwordConfirmation" pattern="{{user.password}}" #passwordConfirmation="ngModel"/>
    </label>
    <span *ngIf="!passwordConfirmation.valid">
      <span *ngIf="passwordConfirmation.errors.required">Password Confirmation is required</span>
      <span *ngIf="passwordConfirmation.errors.pattern">Password Confirmation must match</span>
    </span>
    <p></p>
    <label>Street Address: 
      <input        
        type="text" 
        name="address"
        required 
        [(ngModel)] = "user.address" 
        #address = "ngModel"/>
    </label>
    <span *ngIf="!address.valid">
      <span *ngIf="address.errors.required">Address is Required</span> 
    </span>
    <p></p>
    <label>Unit/Apt #: 
      <input
        type="text" 
        name="unit"
        [(ngModel)] = "user.unit"  
        #unit = "ngModel"/>
    </label>

    <p></p>
    <label>City: 
      <input
        type="text" 
        name="city"
        required 
        [(ngModel)] = "user.city" 
        #city = "ngModel"
      />
    <span *ngIf="!city.valid">
      <span *ngIf="city.errors.required">City is Required</span> 
    </span>
    </label>
    <p></p>
    <label>State:
      <select name="state" [(ngModel)] = "user.state"  >
        <option *ngFor="let state of states" [value]="state">{{ state }}</option>
      </select> 
    </label>
    <p></p>
    <label>I'm feeling lucky: 
      <input type="radio" name="luck" value="yes" required [(ngModel)] = "user.luck" #luck = "ngModel">Yes
      <input type="radio" name="luck" value="no" required [(ngModel)] = "user.luck" #luck = "ngModel">No
    </label>
    <span *ngIf="!luck.valid">
      <span *ngIf="luck.errors.required">Answer is Required</span> 
    </span>
    <p></p>
    <input type="submit" value="Register" [disabled] = "luck.invalid || city.invalid || address.invalid || password.invalid || lastName.invalid || firstName.invalid || passwordConfirmation.invalid" />
  </form>
</fieldset>

